---
title: "Как работают мессенджеры"
permalink: /posts/how-messengers-work
date: 2022-03-16
categories:
    - Как работает
tags:
    - мессенджеры
    - онлайн
    - общение
---

# Типы сетей связи

Существует несколько сетевых архитектур, используемых для передачи сообщений между пользователями. Нельзя выделить самую лучшую архитектуру из всех, поэтому делайте выбор, исходя из ваших нужд.

## Централизованные сети  
При использовании централизованного мессенджера, данные всех пользователей хранятся на одном сервере, либо на нескольких серверах, принадлежащих одной компании. По сути большинство сервисов, которые использует средне-статистический человек, являются централизованными.

:+1: **Преимущества:**

- Легко находить ваших друзей и других пользователей.
- Новые функции внедряются быстрее.
- Проблемы с конфиденциальностью могут быть уменьшены, если выбрать мессенджер, которому вы доверяете.
- Простота использования.

:-1: **Недостатки:**

- У вас может не получиться войти в ваш аккаунт в мессенджере, с помощью другого приложения, котроое может предлагать более широкий функционал (Во Вконтакте можно зайти из неофициальных приложений, но это могут легко ограничить).
- Документации для сторонних разработчиков может не быть, либо она может быть неполной.
- Условия хранения, обработки, политики конфиденциальности можно легко изменить и не уведомить об этом пользователей.
- Безопасность хранения ваших данных зависит от законодательства страны, в которой компания расположена.

## Федеративные сети  
Федеративные мессенджеры используют несколько независимых серверов, которые могут передавать информацию друг другу (электронная почта - пример федеративной службы). Федеративная сеть позволя независимым друг от друга администраторам контролировать свой собственный сервер и все они являются частью большой сети связи.

Пользователи одного федеративного сервера могут обнаруживать пользователей другого сервера. В некоторых сценариях администраторы могут сделать свой сервер, который не будет связан с остальными (например сервер небольшой команды разработчиков).

:+1: **Преимущества:**

- Даёт больший контроль над своими собственными данными при запуске собственного сервера.
- Позволяет вам выбирать, какому серверу доверять ваши данные.
- Часто можно использовать сторонние клиенты.
- Если у вас есть доступ к программному обеспечению сервера (если сервер запустил ваш друг или член семьи), вы можете проверить, соответствует ли его код общедоступному исходному коду.

:-1: **Недостатки:**

- Добавление новых функций происходит медленнее, т.к. они должны быть стандартизированы и проверены. Это нужно, чтобы они могли работать со всеми серверами в сети.
- Из первого пункта вытекает, что могут отсуствовать некоторые привычные нам функции: пересылка сообщений, офлайн доступ к сообщениям, удаление сообщений.
- Метаданные могут быть доступны владельцам серверов.
- Вы должны знать, кто является администратором сервера. Этим человеком может оказаться любитель, который не способен обеспечить защиту ваших данных по стандартам безопасности.
- Администраторы сервера могут заблокировать другие сервера, которые нарушают общие правила сообщества. Вы не сможете общаться с пользователями на этих серверах.

## Peer-to-Peer (P2P) | Одноранговые сети

P2P мессенджеры подключаются к распределенной сети узлов для передачи сообщений от отправителя к получателю.

Клиенты находят друг друга благодаря использованию распределенной вычислительной сети. Примером данной сети может служить торент. Другим подходом являются сети без доступа к интернету, где соединение устанавливается через локальный WiFi или Bluetooth.

:+1: **Преимущества:**

- Третьим лицам доступно минимум информации.
- Современные платформы P2P реализуют концептуальное шифрование по умолчанию. Нет серверов, которые могут потенциально перехватить и расшифровать ваши сообщения, в отличие от централизованных и федеративных платформ.

:-1: **Недостатки:**
- Сообщения могут быть отправлены только когда ваш собеседник находится онлайн. Однако ваше приложение может хранить сообщения локально, чтобы дождаться, когда ваш собеседник будет онлайн.
- Увеличенный расход заряда аккумулятора, т.к. приложение должно всё время оставаться в сети, чтобы получать сообщения.
- Некоторые распространенные функции месенджеров могут быть не реализованы или реализованы не полностью, например удаление сообщений.
- Ваш IP-адрес и контакты, с которыми вы общаетесь, могут быть раскрыты, если вы не используете VPN или Tor или I2P. Многие страны в разной степени осуществляют массовое наблюдение.

## Анонимная маршрутизация

Мессенджер, использующий анонимную маршрутизацию, может скрыть:
- Идентичность отправителя
- Идентичность получателя
- Доказательства того, что они общаются.

В идеале мессенджер должен скрывать все три пункта.

Существует много разных способов реализации анонимных маршрутизации. Один из самых известных - маршрутизация по принципу луковицы (Tor). Отправитель и получатель никогда не взаимодействуют напрямую, и встречаются только через секретный узел, так что нет утечки IP-адресов, ни физического местоположения. Узлы не могут расшифровать ни сообщения, ни конечный пункт назначения.

:+1: **Преимущества:**

- Раскрывается минимум информации.

:-1: **Недостатки:**

- Очень медленная скорость передачи сообщений.
- Из-за медленной скорости в мессенджерах может отсутствовать функция отправки фото или видео.
- Часто можно отправлять в сообщениях только текст, поскольку скорость медленная.
- Некоторые распространенные функции месенджеров могут быть не реализованы или реализованы не полностью, например удаление сообщений.

# Хранение данных

Централизованные и федеративные сети хранят ваши данные. При выборе таких мессенджеров стоит учитывать этот фактор. Ваши сообщения должны храниться на серверах в зашифрованном виде. В таком случае, даже если силовые структуры попросят мессенджер передать им данные о вас, он не сможет это сделать.

# Наши рекомендации

> Мы рекомендуем только те мессенджеры, которые поддерживают сильное шифрование из конца в конец (end-to-end encryption, E2EE) и были независимо проверены. Приложения, перечисленные здесь - это бесплатное программное обеспечение с открытым исходным кодом (FOSS). Это значит, что эти приложения в любое время могут быть проверены независимыми экспертами.

> :warning: Избегайте: Facebook Messenger, Google Hangouts, LINE, Telegram, Snapchat, Viber, WeChat, WhatsApp, Одноклассники.

> :warning: Telegram не шифрует свои чаты по умолчанию, чтобы создать зашифрованный чат, ножно использовать функцию секретного чата.

**Signal - лучшая альтернатива привычным мессенджерам.**  
Signal это централизованный мессенджер. Поддерживает сообщения, видеозвонки, отправку фото и видео. Все коммуникации зашифрованы. Список контактов зашифрован. Сервера не имеют доступа к вашим данным.

- Требуется номер телефона для регистрации
- Протокол был независимо проверен в 2016 году.
- Доступен на Windows, MacOS, Linux, IOS, Android.

**Session - кросплатформенная анонимность.**  
Мессенджер, использующий шифрование и анонимную маршрутизацию по трем рандомным узлам в сети OXEN.

- Для регистрации НЕ требуется номер телефона или почтовый адрес.
- Был независимо проверен в 2020 году. Протокол описан тут.
- Доступен на Windows, MacOS, Linux, IOS, Android.

**Briar - общение в локальных сетях.**  
Общение онлайн происходит через сеть TOR. Возможно использование офлайн, в таком случае сообщения будут передаваться через Bluetooth или Wi-Fi.  

- Приложение было проверено независимыми экспертами в 2017.
- Доступен только на Android.

Также посмотрите наше [сравнение мессенджеров](/mesengers/) и [секцию с рекомендованными приложениями](/soft/#мессенджеры).

